# Entropy Zero å¼€å‘å·¥ä½œæµæŒ‡å—

> **"çº¯ Rust + æµè§ˆå™¨çƒ­é‡è½½"** å·¥ä½œæµè®¾ç½®æŒ‡å—

---

## ğŸ¯ ç›®æ ‡

- **å·¦å±ä»£ç ï¼Œå³å±æµè§ˆå™¨**
- ä¿®æ”¹ Rust ä»£ç  â†’ `Ctrl+S` â†’ **2ç§’åæµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°**
- æ‰€æœ‰è°ƒè¯•ä¿¡æ¯åœ¨æµè§ˆå™¨ Console é‡Œï¼ˆF12ï¼‰
- ç”¨ egui é¢æ¿å®æ—¶è°ƒå‚ï¼Œ**ä¸éœ€è¦é‡æ–°ç¼–è¯‘**

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³• 1: ä½¿ç”¨ Make (æ¨è)

```bash
cd /Users/graviton/workspace/entropy_zero

# å¯åŠ¨çƒ­é‡è½½å¼€å‘æœåŠ¡å™¨
make web
```

### æ–¹æ³• 2: ä½¿ç”¨ Just (Rust ç¤¾åŒºæµè¡Œ)

```bash
# å®‰è£… just
cargo install just

# å¯åŠ¨
just web
```

### æ–¹æ³• 3: ç›´æ¥å‘½ä»¤

```bash
cd apps/web && trunk serve --open
```

---

## âš¡ è®¾ç½® Shell å¿«æ·å‘½ä»¤

åœ¨ä½ çš„ `~/.zshrc` æˆ– `~/.bashrc` ä¸­æ·»åŠ ï¼š

```bash
# Entropy Zero å¿«æ·å‘½ä»¤
alias ezrun="cd ~/workspace/entropy_zero && make web"
alias ezcheck="cd ~/workspace/entropy_zero && cargo check --workspace"
alias eznative="cd ~/workspace/entropy_zero && cargo run -p entropy_zero_web"
```

ç„¶åé‡æ–°åŠ è½½é…ç½®ï¼š

```bash
source ~/.zshrc  # æˆ– source ~/.bashrc
```

**æ–°ä¹ æƒ¯**ï¼šæ¯å¤©åä¸‹æ¥ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ `ezrun`ã€‚

---

## ğŸ”§ ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–

å·²é…ç½®åœ¨ `Cargo.toml` ä¸­ï¼š

```toml
[profile.dev]
opt-level = 1  # ä½ çš„ä»£ç ï¼šæœ€å°ä¼˜åŒ–ï¼Œå¿«é€Ÿç¼–è¯‘

[profile.dev.package."*"]
opt-level = 3  # ä¾èµ–åº“(Bevy)ï¼šå®Œå…¨ä¼˜åŒ–ï¼Œåªç¼–è¯‘ä¸€æ¬¡
```

**æ•ˆæœ**ï¼š
- é¦–æ¬¡ç¼–è¯‘ï¼š~2 åˆ†é’Ÿï¼ˆä¸‹è½½å¹¶ä¼˜åŒ–æ‰€æœ‰ä¾èµ–ï¼‰
- å¢é‡ç¼–è¯‘ï¼š**1-3 ç§’**ï¼ˆåªé‡æ–°ç¼–è¯‘ä½ æ”¹çš„æ–‡ä»¶ï¼‰

---

## ğŸ› æµè§ˆå™¨è°ƒè¯•ï¼ˆçº¯ Rustï¼Œä¸å†™ JSï¼‰

### æŸ¥çœ‹æ—¥å¿—

1. æŒ‰ `F12` æ‰“å¼€ Chrome å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° **Console** é¢æ¿
3. ä½ ä¼šçœ‹åˆ°çº¯ Rust æ—¥å¿—ï¼š

```
[INFO] â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
[INFO] â•‘     Entropy Zero - Scientific Simulation Platform          â•‘
[INFO] â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[DEBUG] Particle velocity: Vec3(1.2, -3.4, 0.0)
```

### åœ¨ä»£ç ä¸­æ·»åŠ æ—¥å¿—

```rust
use bevy::prelude::*;

fn my_system(query: Query<&Velocity>) {
    for vel in query.iter() {
        // âœ… ä½¿ç”¨ Bevy æ—¥å¿—å®ï¼ˆè‡ªåŠ¨è¾“å‡ºåˆ°æµè§ˆå™¨ Consoleï¼‰
        info!("Processing entity");
        debug!("Velocity: {:?}", vel);
        warn!("Velocity too high: {:?}", vel);
        error!("Something went wrong!");
        
        // âŒ ä¸è¦ç”¨ println!ï¼ˆåœ¨ WASM é‡Œä¸å¯é ï¼‰
    }
}
```

### æ—¥å¿—çº§åˆ«è¿‡æ»¤

åœ¨ `apps/web/src/main.rs` ä¸­é…ç½®ï¼š

```rust
.set(LogPlugin {
    level: bevy::log::Level::DEBUG,  // æ”¹æˆ TRACE çœ‹æ›´å¤šç»†èŠ‚
    filter: "wgpu=error,bevy_render=info,my_crate=debug".to_string(),
    ..default()
})
```

---

## ğŸ¨ è§†è§‰è°ƒè¯•ï¼šç”¨ egui ä»£æ›¿ HTML

**ä¸è¦**ï¼šæ”¹ä»£ç  â†’ ç¼–è¯‘ â†’ åˆ·æ–° â†’ çœ‹æ•ˆæœ

**è¦**ï¼šåœ¨æµè§ˆå™¨é‡Œç›´æ¥æ‹–æ»‘å—ï¼Œ**å®æ—¶çœ‹æ•ˆæœ**

### å·²æœ‰çš„è°ƒè¯•é¢æ¿

ç²’å­æ¨¡æ‹Ÿå·²ç»æœ‰æ§åˆ¶é¢æ¿ï¼š

- â–¶/â¸ æ’­æ”¾/æš‚åœ
- é‡åŠ›æ»‘å— (0-30 m/sÂ²)
- è¾¹ç•Œå¤§å°æ»‘å—
- é€Ÿåº¦å€ç‡æ»‘å—

### æ·»åŠ è‡ªå·±çš„è°ƒè¯•é¢æ¿

```rust
use bevy::prelude::*;
use bevy_egui::{egui, EguiContexts};

fn debug_panel(
    mut contexts: EguiContexts,
    mut gravity: ResMut<Gravity>,
    mut friction: ResMut<Friction>,
) {
    egui::Window::new("ğŸ”§ God Mode")
        .default_pos([10.0, 10.0])
        .show(contexts.ctx_mut(), |ui| {
            
            ui.heading("Physics Parameters");
            
            // æ»‘å—ï¼šæ‹–åŠ¨å³æ—¶ç”Ÿæ•ˆ
            ui.add(egui::Slider::new(&mut gravity.value, 0.0..=20.0)
                .text("Gravity (m/sÂ²)"));
            
            ui.add(egui::Slider::new(&mut friction.value, 0.0..=1.0)
                .text("Friction"));
            
            ui.separator();
            
            // å¤é€‰æ¡†
            ui.checkbox(&mut friction.enabled, "Enable friction");
            
            // æŒ‰é’®
            if ui.button("Reset to defaults").clicked() {
                gravity.value = 9.8;
                friction.value = 0.1;
            }
            
            // æ˜¾ç¤ºå®æ—¶æ•°å€¼
            ui.label(format!("Current gravity: {:.2}", gravity.value));
        });
}
```

---

## ğŸ“ æ—¥å¸¸å·¥ä½œæµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä½ çš„å±å¹•å¸ƒå±€                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚                                  â”‚
â”‚     VS Code              â”‚      æµè§ˆå™¨ (localhost:8080)     â”‚
â”‚                          â”‚                                  â”‚
â”‚  - ä¿®æ”¹ Rust ä»£ç         â”‚  - Canvas æ˜¾ç¤ºä»¿çœŸ               â”‚
â”‚  - Ctrl+S ä¿å­˜           â”‚  - egui é¢æ¿è°ƒå‚                 â”‚
â”‚                          â”‚  - F12 çœ‹ Console æ—¥å¿—           â”‚
â”‚                          â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»ˆç«¯ (åå°è¿è¡Œ trunk serve)                                 â”‚
â”‚  â†’ æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°ç¼–è¯‘ï¼Œæµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ”¹é€»è¾‘

1. åœ¨ VS Code ä¸­ä¿®æ”¹ä»£ç 
2. `Ctrl+S` ä¿å­˜
3. ç¥ä¸€çœ¼æµè§ˆå™¨
4. **2ç§’åè‡ªåŠ¨åˆ·æ–°**
5. çœ‹åˆ°æ–°ç‰©ç†æ•ˆæœ

### æ”¹å‚æ•°

1. ä¸è¦ç¡¬ç¼–ç å‚æ•°ï¼
2. åœ¨æµè§ˆå™¨çš„ egui é¢æ¿é‡Œç›´æ¥æ‹–æ‹½æ»‘å—
3. **å®æ—¶çœ‹åˆ°æ•ˆæœå˜åŒ–**
4. æ‰¾åˆ°æœ€ä½³æ‰‹æ„Ÿåï¼Œå†å†™å›ä»£ç 

### æŸ¥ Bug

1. `F12` æ‰“å¼€ DevTools
2. åˆ‡æ¢åˆ° Console é¢æ¿
3. çœ‹çº¯ Rust æ ¼å¼çš„æ—¥å¿—
4. Panic é”™è¯¯ä¹Ÿä¼šæ‰“å°åœ¨è¿™é‡Œï¼ˆä¸ä¼šé»˜é»˜å´©æºƒï¼‰

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `make web` | å¯åŠ¨çƒ­é‡è½½å¼€å‘æœåŠ¡å™¨ |
| `make native` | è¿è¡ŒåŸç”Ÿæ¡Œé¢ç‰ˆï¼ˆæ›´å¿«ï¼‰ |
| `make check` | å¿«é€Ÿæ£€æŸ¥ç¼–è¯‘é”™è¯¯ |
| `make test` | è¿è¡Œæ‰€æœ‰æµ‹è¯• |
| `make clean` | æ¸…ç†æ„å»ºäº§ç‰© |

æˆ–è€…ç”¨ `just`ï¼š

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `just web` | å¯åŠ¨çƒ­é‡è½½å¼€å‘æœåŠ¡å™¨ |
| `just native` | è¿è¡ŒåŸç”Ÿæ¡Œé¢ç‰ˆ |
| `just check` | å¿«é€Ÿæ£€æŸ¥ç¼–è¯‘é”™è¯¯ |
| `just test` | è¿è¡Œæ‰€æœ‰æµ‹è¯• |
| `just lint` | è¿è¡Œ clippy æ£€æŸ¥ |
| `just fmt` | æ ¼å¼åŒ–ä»£ç  |

---

## ğŸ”¥ é«˜çº§æŠ€å·§

### 1. åªç¼–è¯‘ç‰¹å®š crate

```bash
cargo check -p ez_physics  # åªæ£€æŸ¥ ez_physics
```

### 2. ä½¿ç”¨ cargo-watch è‡ªåŠ¨æ£€æŸ¥

```bash
cargo install cargo-watch
cargo watch -x 'check -p ez_physics'
```

### 3. æŸ¥çœ‹ç¼–è¯‘æ—¶é—´åˆ†æ

```bash
cargo build --timings
# ç”Ÿæˆ target/cargo-timings/cargo-timing.html
```

### 4. å¹¶è¡Œç¼–è¯‘ä¼˜åŒ–

åœ¨ `~/.cargo/config.toml` ä¸­æ·»åŠ ï¼š

```toml
[build]
jobs = 8  # æ ¹æ®ä½ çš„ CPU æ ¸å¿ƒæ•°è°ƒæ•´
```

---

## â“ å¸¸è§é—®é¢˜

### Q: trunk å‘½ä»¤æ‰¾ä¸åˆ°ï¼Ÿ

```bash
cargo install trunk
```

### Q: ç¼–è¯‘æ—¶æŠ¥ wasm32 target é”™è¯¯ï¼Ÿ

```bash
rustup target add wasm32-unknown-unknown
```

### Q: æµè§ˆå™¨æ²¡æœ‰è‡ªåŠ¨åˆ·æ–°ï¼Ÿ

æ£€æŸ¥ `apps/web/Trunk.toml` é…ç½®ï¼Œç¡®ä¿ watch æ­£ç¡®è®¾ç½®ã€‚

### Q: egui é¢æ¿ä¸æ˜¾ç¤ºï¼Ÿ

ç¡®ä¿ `EguiPlugin` åœ¨ `App::new()` ä¸­æ­£ç¡®æ·»åŠ ã€‚

---

## ğŸ”¥ æŒ‘æˆ˜ï¼šè¿è¡Œ 100 ä¸‡ç²’å­

æŒ‰ç…§æœ¬æŒ‡å—ï¼Œä½ ç°åœ¨åº”è¯¥èƒ½è½»æ¾ä¿®æ”¹ä»£ç å¹¶çœ‹åˆ°æ•ˆæœã€‚è®©æˆ‘ä»¬åšä¸ªæé™æµ‹è¯•ï¼š

1. æ‰“å¼€ `simulations/classical_mechanics/src/particle_system.rs`
2. ä¿®æ”¹ `ParameterDef` çš„æœ€å¤§å€¼ï¼š
   ```rust
   max: 1_000_000, // æ”¹ä¸º 100 ä¸‡
   ```
3. ä¿å­˜æ–‡ä»¶ â†’ æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°
4. åœ¨å³ä¾§ egui é¢æ¿å°† Particle Count æ‹–åˆ°æœ€å¤§
5. è§‚å¯Ÿ FPS

**æç¤º**ï¼šå¦‚æœä½ çœŸçš„å¾ˆå¡ï¼Œå°è¯•å¼€å¯ Release æ¨¡å¼è¿è¡Œï¼š
```bash
make web # é»˜è®¤æ˜¯ dev æ¨¡å¼ï¼Œä½† Cargo.toml é‡Œæˆ‘ä»¬å¼€å¯äº† opt-level=1
# æˆ–è€…æ„å»ºå‘å¸ƒç‰ˆ
trunk serve --release
```

---

*æœ€åæ›´æ–°: 2026-01-29*
